# tasks.md

## Текущая задача
Реализация ИИ-агента "Ириска" с веселым нравом, поддержкой памяти и OpenAI-совместимым API.

### Исходные данные
- Проектная структура уже создана в папке `src`:
  - FastAPI-приложение
  - OpenAI-совместимый endpoint `/v1/chat/completions`
  - Модули для логики агента, памяти, эмоций, конфигурации, схем
- Логика агента и память вынесены в отдельные модули для расширяемости
- Возможна интеграция с LangChain или LangGraph

### Цели планирования
- Спроектировать и реализовать базовый рабочий прототип агента
- Обеспечить хранение и использование памяти в диалоге
- Сохранить индивидуальность агента ("Ириска", веселый нрав)
- Поддерживать OpenAI-совместимый API для интеграции с внешними системами
- Оставить задел для расширения (эмоции, LangChain/LangGraph, внешние LLM)

---

## Следующий шаг
- Составить подробный план реализации (структура, этапы, потенциальные сложности) 

## Подробный план реализации

### 1. Обзор изменений и архитектуры
- FastAPI-приложение с endpoint `/v1/chat/completions` (OpenAI-совместимый)
- Модули: логика агента, память, эмоции, конфиг, схемы
- Индивидуальность агента: имя "Ириска", веселый нрав (отражать в ответах)
- Возможность расширения (LangChain/LangGraph, внешние LLM)

### 2. Файлы для модификации/создания
- `src/agent/core.py` — основная логика агента
- `src/agent/memory.py` — реализация памяти (in-memory, затем расширяемая)
- `src/agent/emotions.py` — (опционально) эмоциональный анализ
- `src/api/openai_api.py` — endpoint для общения
- `src/schemas/openai.py` — схемы для OpenAI API
- `src/config/settings.py` — конфигурация
- `src/requirements.txt` — зависимости

### 3. Этапы реализации
1. **Базовый прототип**
   - Реализовать in-memory память (история сообщений по user_id)
   - Связать память с агентом
   - Ответ агента: эхо + история + дружелюбный/весёлый стиль
2. **OpenAI-совместимый API**
   - Проверить соответствие формата OpenAI (ChatRequest/ChatResponse)
   - Тестировать интеграцию с внешними клиентами
3. **Индивидуальность агента**
   - Добавить "визитку" (имя, стиль, приветствие)
   - Встроить весёлые/дружелюбные фразы в ответы
4. **Расширяемость**
   - Оставить задел для интеграции LangChain/LangGraph
   - Подготовить структуру для подключения внешних LLM, эмоций, памяти
5. **Документация и тесты**
   - Описать структуру и запуск в README
   - Добавить базовые тесты (опционально)

### 4. Потенциальные сложности
- Корректная обработка формата OpenAI API
- Сохранение индивидуальности агента при расширении
- Масштабирование памяти (in-memory → Redis/S3/VectorDB)
- Интеграция с LangChain/LangGraph (совместимость интерфейсов)

### 5. Чеклист (минимум для MVP)
- [ ] In-memory память работает
- [ ] Эндпоинт `/v1/chat/completions` отдаёт корректный ответ
- [ ] Ответы агента дружелюбные, с "визиткой" Ириски
- [ ] Структура кода готова к расширению
- [ ] Документация по запуску и структуре 